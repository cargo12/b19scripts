#!/bin/bash
# bb v0.5 last mod 2014/03/19
# Latest version at <http://bit.ly/breakboot>
# Copyright 2012,2013,2014 Ryan Sawhill Aroha <rsaw@redhat.com>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, either version 3 of the License, or
#    (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
#    General Public License <gnu.org/licenses/gpl.html> for more details.
#
# In fact, this program's sole purpose is to cause boot problems on a RHEL 6
# system, in order to give you practice at fixing such problems.
# Use at your own risk and preferably on a virtual machine.
#-------------------------------------------------------------------------------

# Colors
reset='\033[0;0m'
bold='\033[1;1m'
red='\033[1;31m'

# Location of breakboot configs
cfgfile=/root/.breakboot
fixfile=/root/.breakboot_fix

for i in /etc/sysconfig/{authconfig,network,sshd}; do . $i 2>/dev/null; done
RR=$(awk {print\$2\$4\$3\$1} /etc/[rza]*[-mpq]re*)
L=$(lsb_release -sr)
p=$(cat /tmp/.bbpass 2>/dev/null)
[[ -z $p ]] && p="${L:0:1}$RR$USENIS$NETWORKING$AUTOCREATE_SERVER_KEYS"
functions=$(mktemp -p /dev/shm) && trap "rm $functions 2>/dev/null" EXIT
openssl aes-128-cbc -md sha256 -k "$p" -a -d <<\EOF | zcat >$functions
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
EOF

. $functions

USAGE() {
  printf "${bold}Usage: ${0##*/} { 1-10 | next | skip | lesson [1-10|all] | fix }${reset}
  • ${bold}1${reset} thru ${bold}10${reset} to setup a specific exercise
  • ${bold}next${reset} to setup the next exercise
  • ${bold}skip${reset} to skip next exercise and setup the one after it
  • ${bold}lesson${reset} to see the lessons for the current exercise
  \n"
}

if [[ -z $1 ]]; then
  USAGE
else  
  case "$1" in
    next|skip|fix|1|2|3|4|5|6|7|8|9|10)
      if [[ $UID == 0 ]]; then
        break_fix "$@"
      else
        echo "Sorry, but you're going to have to run this as root"
        exit 1
      fi
  ;;
    lesson)
      if [[ -n $2 ]] && ! egrep -qs '^([1-9]|1[0]|all)$' <<<"$2"; then
        USAGE
      else
        break_fix "$@"
      fi
  ;;
    *)
      USAGE
  esac
fi
